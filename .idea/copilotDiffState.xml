<?xml version="1.0" encoding="UTF-8"?>
<project version="4">
  <component name="CopilotDiffPersistence">
    <option name="pendingDiffs">
      <map>
        <entry key="$PROJECT_DIR$/app/src/main/java/com/example/prm_assignment/ui/fragments/HomeFragment.java">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/src/main/java/com/example/prm_assignment/ui/fragments/HomeFragment.java" />
              <option name="originalContent" value="package com.example.prm_assignment.ui.fragments;&#10;&#10;import android.annotation.SuppressLint;&#10;import android.os.Bundle;&#10;import android.os.Handler;&#10;import android.os.Looper;&#10;import android.util.Log;&#10;import android.view.LayoutInflater;&#10;import android.view.MotionEvent;&#10;import android.view.View;&#10;import android.view.ViewGroup;&#10;import android.widget.FrameLayout;&#10;import android.widget.ImageView;&#10;import android.widget.LinearLayout;&#10;import android.widget.ProgressBar;&#10;import android.widget.TextView;&#10;import android.widget.Toast;&#10;&#10;import androidx.annotation.NonNull;&#10;import androidx.annotation.Nullable;&#10;import androidx.cardview.widget.CardView;&#10;import androidx.fragment.app.Fragment;&#10;&#10;import com.example.prm_assignment.R;&#10;import com.example.prm_assignment.data.TokenHelper;&#10;import com.example.prm_assignment.data.model.PackageModel;&#10;import com.example.prm_assignment.data.model.PackagesResponse;&#10;import com.example.prm_assignment.data.model.ProfileResponse;&#10;import com.example.prm_assignment.data.remote.PackagesApi;&#10;import com.example.prm_assignment.data.remote.PackagesRetrofitClient;&#10;import com.example.prm_assignment.data.remote.ProfileApi;&#10;import com.example.prm_assignment.data.remote.ProfileRetrofitClient;&#10;&#10;import java.text.NumberFormat;&#10;import java.util.Locale;&#10;import retrofit2.Call;&#10;import retrofit2.Callback;&#10;import retrofit2.Response;&#10;&#10;public class HomeFragment extends Fragment {&#10;    private static final String TAG = &quot;HomeFragment&quot;;&#10;&#10;    private float dX, dY;&#10;    private int lastAction;&#10;&#10;    private TextView tvGreeting;&#10;    private TextView tvCountry;&#10;    private LinearLayout llPackagesContainer;&#10;    private LinearLayout llVehicleSubscriptionsContainer;&#10;    private FrameLayout loadingOverlay;&#10;    private TokenHelper tokenHelper;&#10;    private PackagesApi packagesApi;&#10;    private ProfileApi profileApi;&#10;&#10;    // Track loading states&#10;    private boolean profileLoaded = false;&#10;    private boolean packagesLoaded = false;&#10;    private boolean vehicleSubscriptionsLoaded = false;&#10;&#10;    @SuppressLint(&quot;ClickableViewAccessibility&quot;)&#10;    @Nullable&#10;    @Override&#10;    public View onCreateView(@NonNull LayoutInflater inflater, @Nullable ViewGroup container, @Nullable Bundle savedInstanceState) {&#10;        View view = inflater.inflate(R.layout.fragment_home, container, false);&#10;&#10;        // Initialize TokenHelper and API&#10;        tokenHelper = new TokenHelper(requireContext());&#10;        packagesApi = PackagesRetrofitClient.getInstance().getPackagesApi();&#10;        profileApi = ProfileRetrofitClient.getInstance().getProfileApi();&#10;&#10;        // Initialize views&#10;        tvGreeting = view.findViewById(R.id.tvGreeting);&#10;        tvCountry = view.findViewById(R.id.tvCountry);&#10;        llPackagesContainer = view.findViewById(R.id.llPackagesContainer);&#10;        llVehicleSubscriptionsContainer = view.findViewById(R.id.llVehicleSubscriptionsContainer);&#10;        loadingOverlay = view.findViewById(R.id.loadingOverlay);&#10;&#10;        // Check if views are found&#10;        if (tvGreeting == null) {&#10;            Log.e(TAG, &quot;tvGreeting is null!&quot;);&#10;        }&#10;        if (tvCountry == null) {&#10;            Log.e(TAG, &quot;tvCountry is null!&quot;);&#10;        }&#10;        if (llPackagesContainer == null) {&#10;            Log.e(TAG, &quot;llPackagesContainer is null!&quot;);&#10;        } else {&#10;            Log.d(TAG, &quot;llPackagesContainer found&quot;);&#10;        }&#10;&#10;        // Show loading at start&#10;        showLoading();&#10;&#10;        // Initialize chat bubble&#10;        CardView chatBubble = view.findViewById(R.id.chatBubble);&#10;        if (chatBubble == null) {&#10;            Log.w(TAG, &quot;chatBubble not found in layout&quot;);&#10;        } else {&#10;            chatBubble.setOnTouchListener((v, event) -&gt; {&#10;                switch (event.getActionMasked()) {&#10;                    case MotionEvent.ACTION_DOWN:&#10;                        dX = v.getX() - event.getRawX();&#10;                        dY = v.getY() - event.getRawY();&#10;                        lastAction = MotionEvent.ACTION_DOWN;&#10;                        // Scale down slightly when pressed for visual feedback&#10;                        v.animate().scaleX(0.9f).scaleY(0.9f).setDuration(100).start();&#10;                        break;&#10;&#10;                    case MotionEvent.ACTION_MOVE:&#10;                        // Calculate new position&#10;                        float newX = event.getRawX() + dX;&#10;                        float newY = event.getRawY() + dY;&#10;&#10;                        // Get parent dimensions for boundary checking&#10;                        ViewGroup parent = (ViewGroup) v.getParent();&#10;                        if (parent != null) {&#10;                            // Constrain X within parent bounds&#10;                            float maxX = parent.getWidth() - v.getWidth();&#10;                            newX = Math.max(0, Math.min(newX, maxX));&#10;&#10;                            // Constrain Y within parent bounds&#10;                            float maxY = parent.getHeight() - v.getHeight();&#10;                            newY = Math.max(0, Math.min(newY, maxY));&#10;                        }&#10;&#10;                        // Apply smooth movement with animation&#10;                        v.animate()&#10;                            .x(newX)&#10;                            .y(newY)&#10;                            .setDuration(0)&#10;                            .start();&#10;&#10;                        lastAction = MotionEvent.ACTION_MOVE;&#10;                        break;&#10;&#10;                    case MotionEvent.ACTION_UP:&#10;                        // Scale back to normal&#10;                        v.animate().scaleX(1f).scaleY(1f).setDuration(100).start();&#10;&#10;                        if (lastAction == MotionEvent.ACTION_DOWN) {&#10;                            // This was a click, not a drag&#10;                            v.performClick();&#10;                            Toast.makeText(getContext(), &quot;Chat đang được phát triển&quot;, Toast.LENGTH_SHORT).show();&#10;                        }&#10;                        break;&#10;&#10;                    default:&#10;                        return false;&#10;                }&#10;                return true;&#10;            });&#10;        }&#10;&#10;        // Load data from API&#10;        loadProfileData();&#10;        loadPackagesData();&#10;        loadVehicleSubscriptions();&#10;&#10;        return view;&#10;    }&#10;&#10;    private void showLoading() {&#10;        if (loadingOverlay != null) {&#10;            loadingOverlay.setVisibility(View.VISIBLE);&#10;            Log.d(TAG, &quot;Loading overlay shown&quot;);&#10;        }&#10;    }&#10;&#10;    private void hideLoading() {&#10;        if (loadingOverlay != null) {&#10;            loadingOverlay.setVisibility(View.GONE);&#10;            Log.d(TAG, &quot;Loading overlay hidden&quot;);&#10;        }&#10;    }&#10;&#10;    private void checkAndHideLoading() {&#10;        // Hide loading only when all data is loaded&#10;        if (profileLoaded &amp;&amp; packagesLoaded &amp;&amp; vehicleSubscriptionsLoaded) {&#10;            hideLoading();&#10;            Log.d(TAG, &quot;All data loaded, hiding loading overlay&quot;);&#10;        }&#10;    }&#10;&#10;    private void addPackageCard(PackageModel packageModel) {&#10;        if (llPackagesContainer == null) {&#10;            Log.e(TAG, &quot;llPackagesContainer is null, cannot add card&quot;);&#10;            return;&#10;        }&#10;&#10;        // Inflate the package card layout&#10;        View cardView = LayoutInflater.from(getContext()).inflate(R.layout.item_package, llPackagesContainer, false);&#10;&#10;        // Find views in the card&#10;        TextView tvPackageName = cardView.findViewById(R.id.tvPackageName);&#10;        TextView tvPackagePrice = cardView.findViewById(R.id.tvPackagePrice);&#10;        CardView btnBookNow = cardView.findViewById(R.id.btnBookNow);&#10;&#10;        // Set data&#10;        tvPackageName.setText(packageModel.getName());&#10;&#10;        // Format price&#10;        NumberFormat formatter = NumberFormat.getNumberInstance(new Locale(&quot;vi&quot;, &quot;VN&quot;));&#10;        String formattedPrice = formatter.format(packageModel.getPrice()) + &quot; VND&quot;;&#10;        tvPackagePrice.setText(formattedPrice);&#10;&#10;        // Set click listener&#10;        btnBookNow.setOnClickListener(v -&gt; {&#10;            Toast.makeText(getContext(), &quot;Đặt gói: &quot; + packageModel.getName(), Toast.LENGTH_SHORT).show();&#10;        });&#10;&#10;        cardView.setOnClickListener(v -&gt; {&#10;            Toast.makeText(getContext(), &quot;Selected: &quot; + packageModel.getName(), Toast.LENGTH_SHORT).show();&#10;        });&#10;&#10;        // Add card to container&#10;        llPackagesContainer.addView(cardView);&#10;    }&#10;&#10;    private void loadProfileData() {&#10;        Log.d(TAG, &quot;loadProfileData: Starting to load profile&quot;);&#10;        profileLoaded = false;&#10;        tokenHelper.getTokenAndExecute(token -&gt; {&#10;            Log.d(TAG, &quot;Token retrieved: &quot; + (token != null ? &quot;Yes (length=&quot; + token.length() + &quot;)&quot; : &quot;No&quot;));&#10;            if (token != null &amp;&amp; !token.isEmpty()) {&#10;                fetchProfile(&quot;Bearer &quot; + token);&#10;            } else {&#10;                Log.e(TAG, &quot;No token found&quot;);&#10;                if (tvGreeting != null) {&#10;                    tvGreeting.setText(&quot;Xin chào, Khách&quot;);&#10;                }&#10;                // Mark as loaded even if failed&#10;                profileLoaded = true;&#10;                checkAndHideLoading();&#10;            }&#10;        });&#10;    }&#10;&#10;    private void fetchProfile(String authHeader) {&#10;        Log.d(TAG, &quot;fetchProfile: Making API call&quot;);&#10;        profileApi.getProfile(authHeader).enqueue(new Callback&lt;ProfileResponse&gt;() {&#10;            @Override&#10;            public void onResponse(@NonNull Call&lt;ProfileResponse&gt; call, @NonNull Response&lt;ProfileResponse&gt; response) {&#10;                Log.d(TAG, &quot;Profile API response received: &quot; + response.code());&#10;                if (response.isSuccessful() &amp;&amp; response.body() != null) {&#10;                    ProfileResponse profileResponse = response.body();&#10;                    if (profileResponse.isSuccess() &amp;&amp; profileResponse.getData() != null) {&#10;                        String customerName = profileResponse.getData().getCustomerName();&#10;                        String address = profileResponse.getData().getAddress();&#10;                        Log.d(TAG, &quot;Customer name from API: &quot; + customerName);&#10;                        Log.d(TAG, &quot;Address from API: &quot; + address);&#10;&#10;                        if (tvGreeting != null) {&#10;                            if (customerName != null &amp;&amp; !customerName.isEmpty()) {&#10;                                tvGreeting.setText(&quot;Xin chào, &quot; + customerName);&#10;                            } else {&#10;                                tvGreeting.setText(&quot;Xin chào, Khách hàng&quot;);&#10;                            }&#10;                        }&#10;&#10;                        if (tvCountry != null) {&#10;                            if (address != null &amp;&amp; !address.isEmpty()) {&#10;                                tvCountry.setText(address);&#10;                            } else {&#10;                                tvCountry.setText(&quot;Việt Nam&quot;);&#10;                            }&#10;                        }&#10;                    } else {&#10;                        Log.w(TAG, &quot;Profile response unsuccessful or data is null&quot;);&#10;                        if (tvGreeting != null) {&#10;                            tvGreeting.setText(&quot;Xin chào, Khách hàng&quot;);&#10;                        }&#10;                        if (tvCountry != null) {&#10;                            tvCountry.setText(&quot;Việt Nam&quot;);&#10;                        }&#10;                    }&#10;                } else {&#10;                    Log.e(TAG, &quot;Profile fetch failed: &quot; + response.code());&#10;                    if (tvGreeting != null) {&#10;                        tvGreeting.setText(&quot;Xin chào, Khách hàng&quot;);&#10;                    }&#10;                    if (tvCountry != null) {&#10;                        tvCountry.setText(&quot;Việt Nam&quot;);&#10;                    }&#10;                }&#10;&#10;                // Mark profile as loaded&#10;                profileLoaded = true;&#10;                checkAndHideLoading();&#10;            }&#10;&#10;            @Override&#10;            public void onFailure(@NonNull Call&lt;ProfileResponse&gt; call, @NonNull Throwable t) {&#10;                Log.e(TAG, &quot;Profile fetch error: &quot; + t.getMessage(), t);&#10;                if (tvGreeting != null) {&#10;                    tvGreeting.setText(&quot;Xin chào, Khách hàng&quot;);&#10;                }&#10;                if (tvCountry != null) {&#10;                    tvCountry.setText(&quot;Việt Nam&quot;);&#10;                }&#10;&#10;                // Mark profile as loaded even on failure&#10;                profileLoaded = true;&#10;                checkAndHideLoading();&#10;            }&#10;        });&#10;    }&#10;&#10;    private void loadPackagesData() {&#10;        Log.d(TAG, &quot;loadPackagesData: Starting to load packages&quot;);&#10;        packagesLoaded = false;&#10;        tokenHelper.getTokenAndExecute(token -&gt; {&#10;            Log.d(TAG, &quot;Token retrieved for packages: &quot; + (token != null ? &quot;Yes&quot; : &quot;No&quot;));&#10;            if (token != null &amp;&amp; !token.isEmpty()) {&#10;                Log.d(TAG, &quot;Calling fetchPackages with token&quot;);&#10;                fetchPackages(&quot;Bearer &quot; + token);&#10;            } else {&#10;                Log.e(TAG, &quot;No token found for packages&quot;);&#10;                Toast.makeText(getContext(), &quot;Vui lòng đăng nhập&quot;, Toast.LENGTH_SHORT).show();&#10;                // Mark as loaded even if failed&#10;                packagesLoaded = true;&#10;                checkAndHideLoading();&#10;            }&#10;        });&#10;    }&#10;&#10;    private void fetchPackages(String authHeader) {&#10;        Log.d(TAG, &quot;fetchPackages: Making API call&quot;);&#10;        Log.d(TAG, &quot;Auth header: &quot; + authHeader.substring(0, Math.min(20, authHeader.length())) + &quot;...&quot;);&#10;        Log.d(TAG, &quot;Base URL: &quot; + com.example.prm_assignment.BuildConfig.BASE_URL);&#10;&#10;        packagesApi.getPackages(authHeader).enqueue(new Callback&lt;PackagesResponse&gt;() {&#10;            @Override&#10;            public void onResponse(@NonNull Call&lt;PackagesResponse&gt; call, @NonNull Response&lt;PackagesResponse&gt; response) {&#10;                Log.d(TAG, &quot;Packages API response received&quot;);&#10;                Log.d(TAG, &quot;Response code: &quot; + response.code());&#10;                Log.d(TAG, &quot;Response URL: &quot; + call.request().url());&#10;&#10;                if (response.isSuccessful() &amp;&amp; response.body() != null) {&#10;                    PackagesResponse packagesResponse = response.body();&#10;                    Log.d(TAG, &quot;Response successful: &quot; + packagesResponse.isSuccess());&#10;                    if (packagesResponse.isSuccess() &amp;&amp; packagesResponse.getData() != null) {&#10;                        Log.d(TAG, &quot;Loaded &quot; + packagesResponse.getData().size() + &quot; packages&quot;);&#10;&#10;                        // Clear existing cards&#10;                        if (llPackagesContainer != null) {&#10;                            llPackagesContainer.removeAllViews();&#10;                        }&#10;&#10;                        // Add each package as a card&#10;                        for (PackageModel packageModel : packagesResponse.getData()) {&#10;                            addPackageCard(packageModel);&#10;                        }&#10;&#10;//                        Toast.makeText(getContext(), &quot;Đã tải &quot; + packagesResponse.getData().size() + &quot; gói dịch vụ&quot;, Toast.LENGTH_SHORT).show();&#10;                    } else {&#10;                        Log.w(TAG, &quot;Response body empty or unsuccessful&quot;);&#10;                    }&#10;                } else {&#10;                    Log.e(TAG, &quot;Packages fetch failed: &quot; + response.code() + &quot; - &quot; + response.message());&#10;                    Toast.makeText(getContext(), &quot;Không thể tải gói dịch vụ: &quot; + response.code(), Toast.LENGTH_SHORT).show();&#10;                }&#10;&#10;                // Mark packages as loaded&#10;                packagesLoaded = true;&#10;                checkAndHideLoading();&#10;            }&#10;&#10;            @Override&#10;            public void onFailure(@NonNull Call&lt;PackagesResponse&gt; call, @NonNull Throwable t) {&#10;                Log.e(TAG, &quot;Packages fetch error: &quot; + t.getMessage(), t);&#10;                Toast.makeText(getContext(), &quot;Lỗi kết nối: &quot; + t.getMessage(), Toast.LENGTH_SHORT).show();&#10;&#10;                // Mark packages as loaded even on failure&#10;                packagesLoaded = true;&#10;                checkAndHideLoading();&#10;            }&#10;        });&#10;    }&#10;&#10;    private void loadVehicleSubscriptions() {&#10;        Log.d(TAG, &quot;loadVehicleSubscriptions: Starting to load vehicle subscriptions&quot;);&#10;        vehicleSubscriptionsLoaded = false;&#10;&#10;        // First, get the customer ID from the profile (through userId -&gt; customerId)&#10;        tokenHelper.getCustomerIdFromProfile(new TokenHelper.CustomerIdCallback() {&#10;            @Override&#10;            public void onCustomerIdRetrieved(String customerId) {&#10;                Log.d(TAG, &quot;Retrieved customerId: &quot; + customerId);&#10;                if (customerId != null &amp;&amp; !customerId.isEmpty()) {&#10;                    // Get token and fetch vehicle subscriptions&#10;                    tokenHelper.getTokenAndExecute(new TokenHelper.TokenCallback() {&#10;                        @Override&#10;                        public void onTokenRetrieved(String token) {&#10;                            if (token != null &amp;&amp; !token.isEmpty()) {&#10;                                fetchVehicleSubscriptions(&quot;Bearer &quot; + token, customerId);&#10;                            } else {&#10;                                Log.e(TAG, &quot;No token found for vehicle subscriptions&quot;);&#10;                                vehicleSubscriptionsLoaded = true;&#10;                                checkAndHideLoading();&#10;                            }&#10;                        }&#10;                    });&#10;                } else {&#10;                    Log.e(TAG, &quot;No customerId found, cannot load vehicle subscriptions&quot;);&#10;                    vehicleSubscriptionsLoaded = true;&#10;                    checkAndHideLoading();&#10;                }&#10;            }&#10;        });&#10;    }&#10;&#10;    private void fetchVehicleSubscriptions(String authHeader, String customerId) {&#10;        Log.d(TAG, &quot;fetchVehicleSubscriptions: Making API call for customerId: &quot; + customerId);&#10;&#10;        com.example.prm_assignment.data.remote.VehicleSubscriptionRetrofitClient&#10;                .getInstance()&#10;                .getVehicleSubscriptionApi()&#10;                .getCustomerSubscriptions(authHeader, customerId)&#10;                .enqueue(new Callback&lt;com.example.prm_assignment.data.model.VehicleSubscriptionResponse&gt;() {&#10;                    @Override&#10;                    public void onResponse(@NonNull Call&lt;com.example.prm_assignment.data.model.VehicleSubscriptionResponse&gt; call,&#10;                                           @NonNull Response&lt;com.example.prm_assignment.data.model.VehicleSubscriptionResponse&gt; response) {&#10;                        Log.d(TAG, &quot;Vehicle subscriptions API response received: &quot; + response.code());&#10;                        Log.d(TAG, &quot;Request URL: &quot; + call.request().url());&#10;&#10;                        if (response.isSuccessful() &amp;&amp; response.body() != null) {&#10;                            com.example.prm_assignment.data.model.VehicleSubscriptionResponse subscriptionResponse = response.body();&#10;                            if (subscriptionResponse.isSuccess() &amp;&amp; subscriptionResponse.getData() != null) {&#10;                                Log.d(TAG, &quot;Loaded &quot; + subscriptionResponse.getData().size() + &quot; vehicle subscriptions&quot;);&#10;&#10;                                // Clear existing cards&#10;                                if (llVehicleSubscriptionsContainer != null) {&#10;                                    llVehicleSubscriptionsContainer.removeAllViews();&#10;                                }&#10;&#10;                                // Add each subscription as a card&#10;                                for (com.example.prm_assignment.data.model.VehicleSubscriptionResponse.VehicleSubscription subscription : subscriptionResponse.getData()) {&#10;                                    addVehicleSubscriptionCard(subscription);&#10;                                }&#10;                            } else {&#10;                                Log.w(TAG, &quot;Vehicle subscriptions response unsuccessful or data is null&quot;);&#10;                            }&#10;                        } else {&#10;                            Log.e(TAG, &quot;Vehicle subscriptions fetch failed: &quot; + response.code());&#10;                            try {&#10;                                if (response.errorBody() != null) {&#10;                                    String errorBody = response.errorBody().string();&#10;                                    Log.e(TAG, &quot;Error body: &quot; + errorBody);&#10;                                }&#10;                            } catch (Exception e) {&#10;                                Log.e(TAG, &quot;Error reading error body&quot;, e);&#10;                            }&#10;                        }&#10;&#10;                        vehicleSubscriptionsLoaded = true;&#10;                        checkAndHideLoading();&#10;                    }&#10;&#10;                    @Override&#10;                    public void onFailure(@NonNull Call&lt;com.example.prm_assignment.data.model.VehicleSubscriptionResponse&gt; call,&#10;                                          @NonNull Throwable t) {&#10;                        Log.e(TAG, &quot;Vehicle subscriptions fetch error: &quot; + t.getMessage(), t);&#10;                        Log.e(TAG, &quot;Error type: &quot; + t.getClass().getName());&#10;                        if (t.getCause() != null) {&#10;                            Log.e(TAG, &quot;Cause: &quot; + t.getCause().getMessage());&#10;                        }&#10;&#10;                        vehicleSubscriptionsLoaded = true;&#10;                        checkAndHideLoading();&#10;&#10;                        // Show user-friendly error message&#10;                        if (getActivity() != null) {&#10;                            getActivity().runOnUiThread(() -&gt;&#10;                                Toast.makeText(getContext(),&#10;                                    &quot;Không thể tải thông tin gói xe. Vui lòng thử lại sau.&quot;,&#10;                                    Toast.LENGTH_SHORT).show()&#10;                            );&#10;                        }&#10;                    }&#10;                });&#10;    }&#10;&#10;    private void addVehicleSubscriptionCard(com.example.prm_assignment.data.model.VehicleSubscriptionResponse.VehicleSubscription subscription) {&#10;        if (llVehicleSubscriptionsContainer == null) {&#10;            Log.e(TAG, &quot;llVehicleSubscriptionsContainer is null, cannot add card&quot;);&#10;            return;&#10;        }&#10;&#10;        // Inflate the vehicle subscription card layout&#10;        View cardView = LayoutInflater.from(getContext()).inflate(R.layout.item_vehicle_subscription, llVehicleSubscriptionsContainer, false);&#10;&#10;        // Find views in the card&#10;        ImageView ivVehicleImage = cardView.findViewById(R.id.ivVehicleImage);&#10;        TextView tvVehicleName = cardView.findViewById(R.id.tvVehicleName);&#10;        TextView tvVehicleModel = cardView.findViewById(R.id.tvVehicleModel);&#10;        TextView tvPackageName = cardView.findViewById(R.id.tvPackageName);&#10;        TextView tvSubscriptionStatus = cardView.findViewById(R.id.tvSubscriptionStatus);&#10;        TextView tvKmInterval = cardView.findViewById(R.id.tvKmInterval);&#10;        TextView tvDateRange = cardView.findViewById(R.id.tvDateRange);&#10;        ProgressBar progressBar = cardView.findViewById(R.id.progressBar);&#10;&#10;        // Set vehicle data&#10;        if (subscription.getVehicleInfo() != null) {&#10;            // Load vehicle image using Glide&#10;            if (subscription.getVehicleInfo().getImageUrl() != null &amp;&amp; !subscription.getVehicleInfo().getImageUrl().isEmpty()) {&#10;                com.bumptech.glide.Glide.with(this)&#10;                        .load(subscription.getVehicleInfo().getImageUrl())&#10;                        .placeholder(android.R.drawable.ic_menu_directions)&#10;                        .error(android.R.drawable.ic_menu_directions)&#10;                        .centerCrop()&#10;                        .into(ivVehicleImage);&#10;                // Remove tint when showing real image&#10;                ivVehicleImage.setImageTintList(null);&#10;            } else {&#10;                // Use default icon with tint&#10;                ivVehicleImage.setImageResource(android.R.drawable.ic_menu_directions);&#10;                ivVehicleImage.setImageTintList(android.content.res.ColorStateList.valueOf(&#10;                        getResources().getColor(android.R.color.holo_green_dark, null)));&#10;            }&#10;&#10;            tvVehicleName.setText(subscription.getVehicleInfo().getVehicleName() != null&#10;                    ? subscription.getVehicleInfo().getVehicleName() : &quot;N/A&quot;);&#10;            tvVehicleModel.setText(&quot;Model: &quot; + (subscription.getVehicleInfo().getModel() != null&#10;                    ? subscription.getVehicleInfo().getModel() : &quot;N/A&quot;));&#10;        }&#10;&#10;        // Set package data&#10;        if (subscription.getPackageInfo() != null) {&#10;            tvPackageName.setText(subscription.getPackageInfo().getName() != null&#10;                    ? subscription.getPackageInfo().getName() : &quot;N/A&quot;);&#10;            tvKmInterval.setText(String.format(Locale.getDefault(), &quot;%,d km&quot;,&#10;                    subscription.getPackageInfo().getKmInterval()));&#10;        }&#10;&#10;        // Calculate days remaining&#10;        if (subscription.getEndDate() != null) {&#10;            try {&#10;                java.text.SimpleDateFormat sdf = new java.text.SimpleDateFormat(&quot;yyyy-MM-dd'T'HH:mm:ss.SSS'Z'&quot;, Locale.getDefault());&#10;                sdf.setTimeZone(java.util.TimeZone.getTimeZone(&quot;UTC&quot;));&#10;                java.util.Date endDate = sdf.parse(subscription.getEndDate());&#10;                java.util.Date now = new java.util.Date();&#10;&#10;                if (endDate != null) {&#10;                    long diffInMillis = endDate.getTime() - now.getTime();&#10;                    long daysRemaining = java.util.concurrent.TimeUnit.MILLISECONDS.toDays(diffInMillis);&#10;&#10;                    if (daysRemaining &gt; 0) {&#10;                        tvSubscriptionStatus.setText(String.format(Locale.getDefault(), &quot;Còn %d ngày&quot;, daysRemaining));&#10;&#10;                        // Set progress and color based on days remaining&#10;                        int totalDays = subscription.getPackageInfo() != null ? subscription.getPackageInfo().getDuration() : 30;&#10;                        int progress = (int) ((daysRemaining * 100) / totalDays);&#10;                        progressBar.setProgress(Math.min(100, Math.max(0, progress)));&#10;&#10;                        // Change color based on urgency&#10;                        if (daysRemaining &lt;= 7) {&#10;                            tvSubscriptionStatus.setTextColor(getResources().getColor(android.R.color.holo_red_dark, null));&#10;                            progressBar.setProgressTintList(android.content.res.ColorStateList.valueOf(&#10;                                    getResources().getColor(android.R.color.holo_red_dark, null)));&#10;                        } else if (daysRemaining &lt;= 15) {&#10;                            tvSubscriptionStatus.setTextColor(getResources().getColor(android.R.color.holo_orange_dark, null));&#10;                            progressBar.setProgressTintList(android.content.res.ColorStateList.valueOf(&#10;                                    getResources().getColor(android.R.color.holo_orange_dark, null)));&#10;                        } else {&#10;                            tvSubscriptionStatus.setTextColor(getResources().getColor(android.R.color.holo_green_dark, null));&#10;                            progressBar.setProgressTintList(android.content.res.ColorStateList.valueOf(&#10;                                    getResources().getColor(android.R.color.holo_green_dark, null)));&#10;                        }&#10;                    } else {&#10;                        tvSubscriptionStatus.setText(&quot;Hết hạn&quot;);&#10;                        tvSubscriptionStatus.setTextColor(getResources().getColor(android.R.color.holo_red_dark, null));&#10;                        progressBar.setProgress(0);&#10;                    }&#10;                }&#10;            } catch (java.text.ParseException e) {&#10;                Log.e(TAG, &quot;Error parsing end date&quot;, e);&#10;                tvSubscriptionStatus.setText(&quot;N/A&quot;);&#10;            }&#10;        }&#10;&#10;        // Format and display date range&#10;        if (subscription.getStartDate() != null &amp;&amp; subscription.getEndDate() != null) {&#10;            try {&#10;                java.text.SimpleDateFormat inputFormat = new java.text.SimpleDateFormat(&quot;yyyy-MM-dd'T'HH:mm:ss.SSS'Z'&quot;, Locale.getDefault());&#10;                java.text.SimpleDateFormat outputFormat = new java.text.SimpleDateFormat(&quot;dd/MM/yyyy&quot;, Locale.getDefault());&#10;                inputFormat.setTimeZone(java.util.TimeZone.getTimeZone(&quot;UTC&quot;));&#10;&#10;                java.util.Date startDate = inputFormat.parse(subscription.getStartDate());&#10;                java.util.Date endDate = inputFormat.parse(subscription.getEndDate());&#10;&#10;                if (startDate != null &amp;&amp; endDate != null) {&#10;                    String dateRange = outputFormat.format(startDate) + &quot; - &quot; + outputFormat.format(endDate);&#10;                    tvDateRange.setText(dateRange);&#10;                }&#10;            } catch (java.text.ParseException e) {&#10;                Log.e(TAG, &quot;Error parsing dates&quot;, e);&#10;                tvDateRange.setText(&quot;N/A&quot;);&#10;            }&#10;        }&#10;&#10;        // Add click listener&#10;        cardView.setOnClickListener(v -&gt; {&#10;            Toast.makeText(getContext(), &quot;Chi tiết: &quot; + subscription.getVehicleInfo().getVehicleName(), Toast.LENGTH_SHORT).show();&#10;        });&#10;&#10;        // Add card to container&#10;        llVehicleSubscriptionsContainer.addView(cardView);&#10;    }&#10;}&#10;&#10;" />
              <option name="updatedContent" value="package com.example.prm_assignment.ui.fragments;&#10;&#10;import android.annotation.SuppressLint;&#10;import android.os.Bundle;&#10;import android.os.Handler;&#10;import android.os.Looper;&#10;import android.util.Log;&#10;import android.view.LayoutInflater;&#10;import android.view.MotionEvent;&#10;import android.view.View;&#10;import android.view.ViewGroup;&#10;import android.widget.FrameLayout;&#10;import android.widget.LinearLayout;&#10;import android.widget.ProgressBar;&#10;import android.widget.TextView;&#10;import android.widget.Toast;&#10;&#10;import androidx.annotation.NonNull;&#10;import androidx.annotation.Nullable;&#10;import androidx.cardview.widget.CardView;&#10;import androidx.fragment.app.Fragment;&#10;&#10;import com.example.prm_assignment.R;&#10;import com.example.prm_assignment.data.TokenHelper;&#10;import com.example.prm_assignment.data.model.PackageModel;&#10;import com.example.prm_assignment.data.model.PackagesResponse;&#10;import com.example.prm_assignment.data.model.ProfileResponse;&#10;import com.example.prm_assignment.data.remote.PackagesApi;&#10;import com.example.prm_assignment.data.remote.PackagesRetrofitClient;&#10;import com.example.prm_assignment.data.remote.ProfileApi;&#10;import com.example.prm_assignment.data.remote.ProfileRetrofitClient;&#10;&#10;import java.text.NumberFormat;&#10;import java.util.Locale;&#10;import retrofit2.Call;&#10;import retrofit2.Callback;&#10;import retrofit2.Response;&#10;&#10;public class HomeFragment extends Fragment {&#10;    private static final String TAG = &quot;HomeFragment&quot;;&#10;&#10;    private float dX, dY;&#10;    private int lastAction;&#10;&#10;    private TextView tvGreeting;&#10;    private TextView tvCountry;&#10;    private LinearLayout llPackagesContainer;&#10;    private LinearLayout llVehicleSubscriptionsContainer;&#10;    private FrameLayout loadingOverlay;&#10;    private TokenHelper tokenHelper;&#10;    private PackagesApi packagesApi;&#10;    private ProfileApi profileApi;&#10;&#10;    // Track loading states&#10;    private boolean profileLoaded = false;&#10;    private boolean packagesLoaded = false;&#10;    private boolean vehicleSubscriptionsLoaded = false;&#10;&#10;    @SuppressLint(&quot;ClickableViewAccessibility&quot;)&#10;    @Nullable&#10;    @Override&#10;    public View onCreateView(@NonNull LayoutInflater inflater, @Nullable ViewGroup container, @Nullable Bundle savedInstanceState) {&#10;        View view = inflater.inflate(R.layout.fragment_home, container, false);&#10;&#10;        // Initialize TokenHelper and API&#10;        tokenHelper = new TokenHelper(requireContext());&#10;        packagesApi = PackagesRetrofitClient.getInstance().getPackagesApi();&#10;        profileApi = ProfileRetrofitClient.getInstance().getProfileApi();&#10;&#10;        // Initialize views&#10;        tvGreeting = view.findViewById(R.id.tvGreeting);&#10;        tvCountry = view.findViewById(R.id.tvCountry);&#10;        llPackagesContainer = view.findViewById(R.id.llPackagesContainer);&#10;        llVehicleSubscriptionsContainer = view.findViewById(R.id.llVehicleSubscriptionsContainer);&#10;        loadingOverlay = view.findViewById(R.id.loadingOverlay);&#10;&#10;        // Check if views are found&#10;        if (tvGreeting == null) {&#10;            Log.e(TAG, &quot;tvGreeting is null!&quot;);&#10;        }&#10;        if (tvCountry == null) {&#10;            Log.e(TAG, &quot;tvCountry is null!&quot;);&#10;        }&#10;        if (llPackagesContainer == null) {&#10;            Log.e(TAG, &quot;llPackagesContainer is null!&quot;);&#10;        } else {&#10;            Log.d(TAG, &quot;llPackagesContainer found&quot;);&#10;        }&#10;&#10;        // Show loading at start&#10;        showLoading();&#10;&#10;        // Initialize chat bubble&#10;        CardView chatBubble = view.findViewById(R.id.chatBubble);&#10;        if (chatBubble == null) {&#10;            Log.w(TAG, &quot;chatBubble not found in layout&quot;);&#10;        } else {&#10;            chatBubble.setOnTouchListener((v, event) -&gt; {&#10;                switch (event.getActionMasked()) {&#10;                    case MotionEvent.ACTION_DOWN:&#10;                        dX = v.getX() - event.getRawX();&#10;                        dY = v.getY() - event.getRawY();&#10;                        lastAction = MotionEvent.ACTION_DOWN;&#10;                        // Scale down slightly when pressed for visual feedback&#10;                        v.animate().scaleX(0.9f).scaleY(0.9f).setDuration(100).start();&#10;                        break;&#10;&#10;                    case MotionEvent.ACTION_MOVE:&#10;                        // Calculate new position&#10;                        float newX = event.getRawX() + dX;&#10;                        float newY = event.getRawY() + dY;&#10;&#10;                        // Get parent dimensions for boundary checking&#10;                        ViewGroup parent = (ViewGroup) v.getParent();&#10;                        if (parent != null) {&#10;                            // Constrain X within parent bounds&#10;                            float maxX = parent.getWidth() - v.getWidth();&#10;                            newX = Math.max(0, Math.min(newX, maxX));&#10;&#10;                            // Constrain Y within parent bounds&#10;                            float maxY = parent.getHeight() - v.getHeight();&#10;                            newY = Math.max(0, Math.min(newY, maxY));&#10;                        }&#10;&#10;                        // Apply smooth movement with animation&#10;                        v.animate()&#10;                            .x(newX)&#10;                            .y(newY)&#10;                            .setDuration(0)&#10;                            .start();&#10;&#10;                        lastAction = MotionEvent.ACTION_MOVE;&#10;                        break;&#10;&#10;                    case MotionEvent.ACTION_UP:&#10;                        // Scale back to normal&#10;                        v.animate().scaleX(1f).scaleY(1f).setDuration(100).start();&#10;&#10;                        if (lastAction == MotionEvent.ACTION_DOWN) {&#10;                            // This was a click, not a drag&#10;                            v.performClick();&#10;                            Toast.makeText(getContext(), &quot;Chat đang được phát triển&quot;, Toast.LENGTH_SHORT).show();&#10;                        }&#10;                        break;&#10;&#10;                    default:&#10;                        return false;&#10;                }&#10;                return true;&#10;            });&#10;        }&#10;&#10;        // Load data from API&#10;        loadProfileData();&#10;        loadPackagesData();&#10;        loadVehicleSubscriptions();&#10;&#10;        return view;&#10;    }&#10;&#10;    private void showLoading() {&#10;        if (loadingOverlay != null) {&#10;            loadingOverlay.setVisibility(View.VISIBLE);&#10;            Log.d(TAG, &quot;Loading overlay shown&quot;);&#10;        }&#10;    }&#10;&#10;    private void hideLoading() {&#10;        if (loadingOverlay != null) {&#10;            loadingOverlay.setVisibility(View.GONE);&#10;            Log.d(TAG, &quot;Loading overlay hidden&quot;);&#10;        }&#10;    }&#10;&#10;    private void checkAndHideLoading() {&#10;        // Hide loading only when all data is loaded&#10;        if (profileLoaded &amp;&amp; packagesLoaded &amp;&amp; vehicleSubscriptionsLoaded) {&#10;            hideLoading();&#10;            Log.d(TAG, &quot;All data loaded, hiding loading overlay&quot;);&#10;        }&#10;    }&#10;&#10;    private void addPackageCard(PackageModel packageModel) {&#10;        if (llPackagesContainer == null) {&#10;            Log.e(TAG, &quot;llPackagesContainer is null, cannot add card&quot;);&#10;            return;&#10;        }&#10;&#10;        // Inflate the package card layout&#10;        View cardView = LayoutInflater.from(getContext()).inflate(R.layout.item_package, llPackagesContainer, false);&#10;&#10;        // Find views in the card&#10;        TextView tvPackageName = cardView.findViewById(R.id.tvPackageName);&#10;        TextView tvPackagePrice = cardView.findViewById(R.id.tvPackagePrice);&#10;        CardView btnBookNow = cardView.findViewById(R.id.btnBookNow);&#10;&#10;        // Set data&#10;        tvPackageName.setText(packageModel.getName());&#10;&#10;        // Format price&#10;        NumberFormat formatter = NumberFormat.getNumberInstance(new Locale(&quot;vi&quot;, &quot;VN&quot;));&#10;        String formattedPrice = formatter.format(packageModel.getPrice()) + &quot; VND&quot;;&#10;        tvPackagePrice.setText(formattedPrice);&#10;&#10;        // Set click listener&#10;        btnBookNow.setOnClickListener(v -&gt; {&#10;            Toast.makeText(getContext(), &quot;Đặt gói: &quot; + packageModel.getName(), Toast.LENGTH_SHORT).show();&#10;        });&#10;&#10;        cardView.setOnClickListener(v -&gt; {&#10;            Toast.makeText(getContext(), &quot;Selected: &quot; + packageModel.getName(), Toast.LENGTH_SHORT).show();&#10;        });&#10;&#10;        // Add card to container&#10;        llPackagesContainer.addView(cardView);&#10;    }&#10;&#10;    private void loadProfileData() {&#10;        Log.d(TAG, &quot;loadProfileData: Starting to load profile&quot;);&#10;        profileLoaded = false;&#10;        tokenHelper.getTokenAndExecute(token -&gt; {&#10;            Log.d(TAG, &quot;Token retrieved: &quot; + (token != null ? &quot;Yes (length=&quot; + token.length() + &quot;)&quot; : &quot;No&quot;));&#10;            if (token != null &amp;&amp; !token.isEmpty()) {&#10;                fetchProfile(&quot;Bearer &quot; + token);&#10;            } else {&#10;                Log.e(TAG, &quot;No token found&quot;);&#10;                if (tvGreeting != null) {&#10;                    tvGreeting.setText(&quot;Xin chào, Khách&quot;);&#10;                }&#10;                // Mark as loaded even if failed&#10;                profileLoaded = true;&#10;                checkAndHideLoading();&#10;            }&#10;        });&#10;    }&#10;&#10;    private void fetchProfile(String authHeader) {&#10;        Log.d(TAG, &quot;fetchProfile: Making API call&quot;);&#10;        profileApi.getProfile(authHeader).enqueue(new Callback&lt;ProfileResponse&gt;() {&#10;            @Override&#10;            public void onResponse(@NonNull Call&lt;ProfileResponse&gt; call, @NonNull Response&lt;ProfileResponse&gt; response) {&#10;                Log.d(TAG, &quot;Profile API response received: &quot; + response.code());&#10;                if (response.isSuccessful() &amp;&amp; response.body() != null) {&#10;                    ProfileResponse profileResponse = response.body();&#10;                    if (profileResponse.isSuccess() &amp;&amp; profileResponse.getData() != null) {&#10;                        String customerName = profileResponse.getData().getCustomerName();&#10;                        String address = profileResponse.getData().getAddress();&#10;                        Log.d(TAG, &quot;Customer name from API: &quot; + customerName);&#10;                        Log.d(TAG, &quot;Address from API: &quot; + address);&#10;&#10;                        if (tvGreeting != null) {&#10;                            if (customerName != null &amp;&amp; !customerName.isEmpty()) {&#10;                                tvGreeting.setText(&quot;Xin chào, &quot; + customerName);&#10;                            } else {&#10;                                tvGreeting.setText(&quot;Xin chào, Khách hàng&quot;);&#10;                            }&#10;                        }&#10;&#10;                        if (tvCountry != null) {&#10;                            if (address != null &amp;&amp; !address.isEmpty()) {&#10;                                tvCountry.setText(address);&#10;                            } else {&#10;                                tvCountry.setText(&quot;Việt Nam&quot;);&#10;                            }&#10;                        }&#10;                    } else {&#10;                        Log.w(TAG, &quot;Profile response unsuccessful or data is null&quot;);&#10;                        if (tvGreeting != null) {&#10;                            tvGreeting.setText(&quot;Xin chào, Khách hàng&quot;);&#10;                        }&#10;                        if (tvCountry != null) {&#10;                            tvCountry.setText(&quot;Việt Nam&quot;);&#10;                        }&#10;                    }&#10;                } else {&#10;                    Log.e(TAG, &quot;Profile fetch failed: &quot; + response.code());&#10;                    if (tvGreeting != null) {&#10;                        tvGreeting.setText(&quot;Xin chào, Khách hàng&quot;);&#10;                    }&#10;                    if (tvCountry != null) {&#10;                        tvCountry.setText(&quot;Việt Nam&quot;);&#10;                    }&#10;                }&#10;&#10;                // Mark profile as loaded&#10;                profileLoaded = true;&#10;                checkAndHideLoading();&#10;            }&#10;&#10;            @Override&#10;            public void onFailure(@NonNull Call&lt;ProfileResponse&gt; call, @NonNull Throwable t) {&#10;                Log.e(TAG, &quot;Profile fetch error: &quot; + t.getMessage(), t);&#10;                if (tvGreeting != null) {&#10;                    tvGreeting.setText(&quot;Xin chào, Khách hàng&quot;);&#10;                }&#10;                if (tvCountry != null) {&#10;                    tvCountry.setText(&quot;Việt Nam&quot;);&#10;                }&#10;&#10;                // Mark profile as loaded even on failure&#10;                profileLoaded = true;&#10;                checkAndHideLoading();&#10;            }&#10;        });&#10;    }&#10;&#10;    private void loadPackagesData() {&#10;        Log.d(TAG, &quot;loadPackagesData: Starting to load packages&quot;);&#10;        packagesLoaded = false;&#10;        tokenHelper.getTokenAndExecute(token -&gt; {&#10;            Log.d(TAG, &quot;Token retrieved for packages: &quot; + (token != null ? &quot;Yes&quot; : &quot;No&quot;));&#10;            if (token != null &amp;&amp; !token.isEmpty()) {&#10;                Log.d(TAG, &quot;Calling fetchPackages with token&quot;);&#10;                fetchPackages(&quot;Bearer &quot; + token);&#10;            } else {&#10;                Log.e(TAG, &quot;No token found for packages&quot;);&#10;                Toast.makeText(getContext(), &quot;Vui lòng đăng nhập&quot;, Toast.LENGTH_SHORT).show();&#10;                // Mark as loaded even if failed&#10;                packagesLoaded = true;&#10;                checkAndHideLoading();&#10;            }&#10;        });&#10;    }&#10;&#10;    private void fetchPackages(String authHeader) {&#10;        Log.d(TAG, &quot;fetchPackages: Making API call&quot;);&#10;        Log.d(TAG, &quot;Auth header: &quot; + authHeader.substring(0, Math.min(20, authHeader.length())) + &quot;...&quot;);&#10;        Log.d(TAG, &quot;Base URL: &quot; + com.example.prm_assignment.BuildConfig.BASE_URL);&#10;&#10;        packagesApi.getPackages(authHeader).enqueue(new Callback&lt;PackagesResponse&gt;() {&#10;            @Override&#10;            public void onResponse(@NonNull Call&lt;PackagesResponse&gt; call, @NonNull Response&lt;PackagesResponse&gt; response) {&#10;                Log.d(TAG, &quot;Packages API response received&quot;);&#10;                Log.d(TAG, &quot;Response code: &quot; + response.code());&#10;                Log.d(TAG, &quot;Response URL: &quot; + call.request().url());&#10;&#10;                if (response.isSuccessful() &amp;&amp; response.body() != null) {&#10;                    PackagesResponse packagesResponse = response.body();&#10;                    Log.d(TAG, &quot;Response successful: &quot; + packagesResponse.isSuccess());&#10;                    if (packagesResponse.isSuccess() &amp;&amp; packagesResponse.getData() != null) {&#10;                        Log.d(TAG, &quot;Loaded &quot; + packagesResponse.getData().size() + &quot; packages&quot;);&#10;&#10;                        // Clear existing cards&#10;                        if (llPackagesContainer != null) {&#10;                            llPackagesContainer.removeAllViews();&#10;                        }&#10;&#10;                        // Add each package as a card&#10;                        for (PackageModel packageModel : packagesResponse.getData()) {&#10;                            addPackageCard(packageModel);&#10;                        }&#10;&#10;//                        Toast.makeText(getContext(), &quot;Đã tải &quot; + packagesResponse.getData().size() + &quot; gói dịch vụ&quot;, Toast.LENGTH_SHORT).show();&#10;                    } else {&#10;                        Log.w(TAG, &quot;Response body empty or unsuccessful&quot;);&#10;                    }&#10;                } else {&#10;                    Log.e(TAG, &quot;Packages fetch failed: &quot; + response.code() + &quot; - &quot; + response.message());&#10;                    Toast.makeText(getContext(), &quot;Không thể tải gói dịch vụ: &quot; + response.code(), Toast.LENGTH_SHORT).show();&#10;                }&#10;&#10;                // Mark packages as loaded&#10;                packagesLoaded = true;&#10;                checkAndHideLoading();&#10;            }&#10;&#10;            @Override&#10;            public void onFailure(@NonNull Call&lt;PackagesResponse&gt; call, @NonNull Throwable t) {&#10;                Log.e(TAG, &quot;Packages fetch error: &quot; + t.getMessage(), t);&#10;                Toast.makeText(getContext(), &quot;Lỗi kết nối: &quot; + t.getMessage(), Toast.LENGTH_SHORT).show();&#10;&#10;                // Mark packages as loaded even on failure&#10;                packagesLoaded = true;&#10;                checkAndHideLoading();&#10;            }&#10;        });&#10;    }&#10;&#10;    private void loadVehicleSubscriptions() {&#10;        Log.d(TAG, &quot;loadVehicleSubscriptions: Starting to load vehicle subscriptions&quot;);&#10;        vehicleSubscriptionsLoaded = false;&#10;&#10;        // First, get the customer ID from the profile (through userId -&gt; customerId)&#10;        tokenHelper.getCustomerIdFromProfile(new TokenHelper.CustomerIdCallback() {&#10;            @Override&#10;            public void onCustomerIdRetrieved(String customerId) {&#10;                Log.d(TAG, &quot;Retrieved customerId: &quot; + customerId);&#10;                if (customerId != null &amp;&amp; !customerId.isEmpty()) {&#10;                    // Get token and fetch vehicle subscriptions&#10;                    tokenHelper.getTokenAndExecute(new TokenHelper.TokenCallback() {&#10;                        @Override&#10;                        public void onTokenRetrieved(String token) {&#10;                            if (token != null &amp;&amp; !token.isEmpty()) {&#10;                                fetchVehicleSubscriptions(&quot;Bearer &quot; + token, customerId);&#10;                            } else {&#10;                                Log.e(TAG, &quot;No token found for vehicle subscriptions&quot;);&#10;                                vehicleSubscriptionsLoaded = true;&#10;                                checkAndHideLoading();&#10;                            }&#10;                        }&#10;                    });&#10;                } else {&#10;                    Log.e(TAG, &quot;No customerId found, cannot load vehicle subscriptions&quot;);&#10;                    vehicleSubscriptionsLoaded = true;&#10;                    checkAndHideLoading();&#10;                }&#10;            }&#10;        });&#10;    }&#10;&#10;    private void fetchVehicleSubscriptions(String authHeader, String customerId) {&#10;        Log.d(TAG, &quot;fetchVehicleSubscriptions: Making API call for customerId: &quot; + customerId);&#10;&#10;        com.example.prm_assignment.data.remote.VehicleSubscriptionRetrofitClient&#10;                .getInstance()&#10;                .getVehicleSubscriptionApi()&#10;                .getCustomerSubscriptions(authHeader, customerId)&#10;                .enqueue(new Callback&lt;com.example.prm_assignment.data.model.VehicleSubscriptionResponse&gt;() {&#10;                    @Override&#10;                    public void onResponse(@NonNull Call&lt;com.example.prm_assignment.data.model.VehicleSubscriptionResponse&gt; call,&#10;                                           @NonNull Response&lt;com.example.prm_assignment.data.model.VehicleSubscriptionResponse&gt; response) {&#10;                        Log.d(TAG, &quot;Vehicle subscriptions API response received: &quot; + response.code());&#10;                        Log.d(TAG, &quot;Request URL: &quot; + call.request().url());&#10;&#10;                        if (response.isSuccessful() &amp;&amp; response.body() != null) {&#10;                            com.example.prm_assignment.data.model.VehicleSubscriptionResponse subscriptionResponse = response.body();&#10;                            if (subscriptionResponse.isSuccess() &amp;&amp; subscriptionResponse.getData() != null) {&#10;                                Log.d(TAG, &quot;Loaded &quot; + subscriptionResponse.getData().size() + &quot; vehicle subscriptions&quot;);&#10;&#10;                                // Clear existing cards&#10;                                if (llVehicleSubscriptionsContainer != null) {&#10;                                    llVehicleSubscriptionsContainer.removeAllViews();&#10;                                }&#10;&#10;                                // Add each subscription as a card&#10;                                for (com.example.prm_assignment.data.model.VehicleSubscriptionResponse.VehicleSubscription subscription : subscriptionResponse.getData()) {&#10;                                    addVehicleSubscriptionCard(subscription);&#10;                                }&#10;                            } else {&#10;                                Log.w(TAG, &quot;Vehicle subscriptions response unsuccessful or data is null&quot;);&#10;                            }&#10;                        } else {&#10;                            Log.e(TAG, &quot;Vehicle subscriptions fetch failed: &quot; + response.code());&#10;                            try {&#10;                                if (response.errorBody() != null) {&#10;                                    String errorBody = response.errorBody().string();&#10;                                    Log.e(TAG, &quot;Error body: &quot; + errorBody);&#10;                                }&#10;                            } catch (Exception e) {&#10;                                Log.e(TAG, &quot;Error reading error body&quot;, e);&#10;                            }&#10;                        }&#10;&#10;                        vehicleSubscriptionsLoaded = true;&#10;                        checkAndHideLoading();&#10;                    }&#10;&#10;                    @Override&#10;                    public void onFailure(@NonNull Call&lt;com.example.prm_assignment.data.model.VehicleSubscriptionResponse&gt; call,&#10;                                          @NonNull Throwable t) {&#10;                        Log.e(TAG, &quot;Vehicle subscriptions fetch error: &quot; + t.getMessage(), t);&#10;                        Log.e(TAG, &quot;Error type: &quot; + t.getClass().getName());&#10;                        if (t.getCause() != null) {&#10;                            Log.e(TAG, &quot;Cause: &quot; + t.getCause().getMessage());&#10;                        }&#10;&#10;                        vehicleSubscriptionsLoaded = true;&#10;                        checkAndHideLoading();&#10;&#10;                        // Show user-friendly error message&#10;                        if (getActivity() != null) {&#10;                            getActivity().runOnUiThread(() -&gt;&#10;                                Toast.makeText(getContext(),&#10;                                    &quot;Không thể tải thông tin gói xe. Vui lòng thử lại sau.&quot;,&#10;                                    Toast.LENGTH_SHORT).show()&#10;                            );&#10;                        }&#10;                    }&#10;                });&#10;    }&#10;&#10;    private void addVehicleSubscriptionCard(com.example.prm_assignment.data.model.VehicleSubscriptionResponse.VehicleSubscription subscription) {&#10;        if (llVehicleSubscriptionsContainer == null) {&#10;            Log.e(TAG, &quot;llVehicleSubscriptionsContainer is null, cannot add card&quot;);&#10;            return;&#10;        }&#10;&#10;        // Inflate the vehicle subscription card layout&#10;        View cardView = LayoutInflater.from(getContext()).inflate(R.layout.item_vehicle_subscription, llVehicleSubscriptionsContainer, false);&#10;&#10;        // Find views in the card (removed ivVehicleImage)&#10;        TextView tvVehicleName = cardView.findViewById(R.id.tvVehicleName);&#10;        TextView tvVehicleModel = cardView.findViewById(R.id.tvVehicleModel);&#10;        TextView tvPackageName = cardView.findViewById(R.id.tvPackageName);&#10;        TextView tvSubscriptionStatus = cardView.findViewById(R.id.tvSubscriptionStatus);&#10;        TextView tvKmInterval = cardView.findViewById(R.id.tvKmInterval);&#10;        TextView tvDateRange = cardView.findViewById(R.id.tvDateRange);&#10;        ProgressBar progressBar = cardView.findViewById(R.id.progressBar);&#10;&#10;        // Set vehicle data&#10;        if (subscription.getVehicleInfo() != null) {&#10;            tvVehicleName.setText(subscription.getVehicleInfo().getVehicleName() != null&#10;                    ? subscription.getVehicleInfo().getVehicleName() : &quot;N/A&quot;);&#10;            tvVehicleModel.setText(&quot;Model: &quot; + (subscription.getVehicleInfo().getModel() != null&#10;                    ? subscription.getVehicleInfo().getModel() : &quot;N/A&quot;));&#10;        }&#10;&#10;        // Set package data&#10;        if (subscription.getPackageInfo() != null) {&#10;            tvPackageName.setText(subscription.getPackageInfo().getName() != null&#10;                    ? subscription.getPackageInfo().getName() : &quot;N/A&quot;);&#10;            tvKmInterval.setText(String.format(Locale.getDefault(), &quot;%,d km&quot;,&#10;                    subscription.getPackageInfo().getKmInterval()));&#10;        }&#10;&#10;        // Calculate days remaining&#10;        if (subscription.getEndDate() != null) {&#10;            try {&#10;                java.text.SimpleDateFormat sdf = new java.text.SimpleDateFormat(&quot;yyyy-MM-dd'T'HH:mm:ss.SSS'Z'&quot;, Locale.getDefault());&#10;                sdf.setTimeZone(java.util.TimeZone.getTimeZone(&quot;UTC&quot;));&#10;                java.util.Date endDate = sdf.parse(subscription.getEndDate());&#10;                java.util.Date now = new java.util.Date();&#10;&#10;                if (endDate != null) {&#10;                    long diffInMillis = endDate.getTime() - now.getTime();&#10;                    long daysRemaining = java.util.concurrent.TimeUnit.MILLISECONDS.toDays(diffInMillis);&#10;&#10;                    if (daysRemaining &gt; 0) {&#10;                        tvSubscriptionStatus.setText(String.format(Locale.getDefault(), &quot;Còn %d ngày&quot;, daysRemaining));&#10;&#10;                        // Set progress and color based on days remaining&#10;                        int totalDays = subscription.getPackageInfo() != null ? subscription.getPackageInfo().getDuration() : 30;&#10;                        int progress = (int) ((daysRemaining * 100) / totalDays);&#10;                        progressBar.setProgress(Math.min(100, Math.max(0, progress)));&#10;&#10;                        // Change color based on urgency&#10;                        if (daysRemaining &lt;= 7) {&#10;                            tvSubscriptionStatus.setTextColor(getResources().getColor(android.R.color.holo_red_dark, null));&#10;                            progressBar.setProgressTintList(android.content.res.ColorStateList.valueOf(&#10;                                    getResources().getColor(android.R.color.holo_red_dark, null)));&#10;                        } else if (daysRemaining &lt;= 15) {&#10;                            tvSubscriptionStatus.setTextColor(getResources().getColor(android.R.color.holo_orange_dark, null));&#10;                            progressBar.setProgressTintList(android.content.res.ColorStateList.valueOf(&#10;                                    getResources().getColor(android.R.color.holo_orange_dark, null)));&#10;                        } else {&#10;                            tvSubscriptionStatus.setTextColor(getResources().getColor(android.R.color.holo_green_dark, null));&#10;                            progressBar.setProgressTintList(android.content.res.ColorStateList.valueOf(&#10;                                    getResources().getColor(android.R.color.holo_green_dark, null)));&#10;                        }&#10;                    } else {&#10;                        tvSubscriptionStatus.setText(&quot;Hết hạn&quot;);&#10;                        tvSubscriptionStatus.setTextColor(getResources().getColor(android.R.color.holo_red_dark, null));&#10;                        progressBar.setProgress(0);&#10;                    }&#10;                }&#10;            } catch (java.text.ParseException e) {&#10;                Log.e(TAG, &quot;Error parsing end date&quot;, e);&#10;                tvSubscriptionStatus.setText(&quot;N/A&quot;);&#10;            }&#10;        }&#10;&#10;        // Format and display date range&#10;        if (subscription.getStartDate() != null &amp;&amp; subscription.getEndDate() != null) {&#10;            try {&#10;                java.text.SimpleDateFormat inputFormat = new java.text.SimpleDateFormat(&quot;yyyy-MM-dd'T'HH:mm:ss.SSS'Z'&quot;, Locale.getDefault());&#10;                java.text.SimpleDateFormat outputFormat = new java.text.SimpleDateFormat(&quot;dd/MM/yyyy&quot;, Locale.getDefault());&#10;                inputFormat.setTimeZone(java.util.TimeZone.getTimeZone(&quot;UTC&quot;));&#10;&#10;                java.util.Date startDate = inputFormat.parse(subscription.getStartDate());&#10;                java.util.Date endDate = inputFormat.parse(subscription.getEndDate());&#10;&#10;                if (startDate != null &amp;&amp; endDate != null) {&#10;                    String dateRange = outputFormat.format(startDate) + &quot; - &quot; + outputFormat.format(endDate);&#10;                    tvDateRange.setText(dateRange);&#10;                }&#10;            } catch (java.text.ParseException e) {&#10;                Log.e(TAG, &quot;Error parsing dates&quot;, e);&#10;                tvDateRange.setText(&quot;N/A&quot;);&#10;            }&#10;        }&#10;&#10;        // Add click listener&#10;        cardView.setOnClickListener(v -&gt; {&#10;            Toast.makeText(getContext(), &quot;Chi tiết: &quot; + subscription.getVehicleInfo().getVehicleName(), Toast.LENGTH_SHORT).show();&#10;        });&#10;&#10;        // Add card to container&#10;        llVehicleSubscriptionsContainer.addView(cardView);&#10;    }&#10;}&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/app/src/main/res/layout/item_vehicle_subscription.xml">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/src/main/res/layout/item_vehicle_subscription.xml" />
              <option name="originalContent" value="&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;&#10;&lt;androidx.cardview.widget.CardView xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&#10;    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;&#10;    xmlns:tools=&quot;http://schemas.android.com/tools&quot;&#10;    android:layout_width=&quot;320dp&quot;&#10;    android:layout_height=&quot;wrap_content&quot;&#10;    android:layout_marginEnd=&quot;12dp&quot;&#10;    app:cardCornerRadius=&quot;16dp&quot;&#10;    app:cardElevation=&quot;6dp&quot;&#10;    app:cardBackgroundColor=&quot;#FFFFFF&quot;&gt;&#10;&#10;    &lt;LinearLayout&#10;        android:layout_width=&quot;match_parent&quot;&#10;        android:layout_height=&quot;wrap_content&quot;&#10;        android:orientation=&quot;vertical&quot;&#10;        android:padding=&quot;16dp&quot;&gt;&#10;&#10;        &lt;!-- Vehicle Image Placeholder --&gt;&#10;        &lt;androidx.cardview.widget.CardView&#10;            android:layout_width=&quot;match_parent&quot;&#10;            android:layout_height=&quot;140dp&quot;&#10;            android:layout_marginBottom=&quot;12dp&quot;&#10;            app:cardCornerRadius=&quot;12dp&quot;&#10;            app:cardElevation=&quot;0dp&quot;&#10;            app:cardBackgroundColor=&quot;#E8F5E8&quot;&gt;&#10;&#10;            &lt;ImageView&#10;                android:id=&quot;@+id/ivVehicleImage&quot;&#10;                android:layout_width=&quot;80dp&quot;&#10;                android:layout_height=&quot;80dp&quot;&#10;                android:layout_gravity=&quot;center&quot;&#10;                android:src=&quot;@android:drawable/ic_menu_directions&quot;&#10;                android:scaleType=&quot;centerCrop&quot;&#10;                android:contentDescription=&quot;Vehicle image&quot; /&gt;&#10;        &lt;/androidx.cardview.widget.CardView&gt;&#10;&#10;        &lt;!-- Vehicle Info --&gt;&#10;        &lt;TextView&#10;            android:id=&quot;@+id/tvVehicleName&quot;&#10;            android:layout_width=&quot;wrap_content&quot;&#10;            android:layout_height=&quot;wrap_content&quot;&#10;            android:text=&quot;Honda City 2022&quot;&#10;            android:textSize=&quot;18sp&quot;&#10;            android:textColor=&quot;#2C5F2D&quot;&#10;            android:textStyle=&quot;bold&quot;&#10;            android:layout_marginBottom=&quot;4dp&quot;&#10;            tools:ignore=&quot;HardcodedText&quot; /&gt;&#10;&#10;        &lt;TextView&#10;            android:id=&quot;@+id/tvVehicleModel&quot;&#10;            android:layout_width=&quot;wrap_content&quot;&#10;            android:layout_height=&quot;wrap_content&quot;&#10;            android:text=&quot;Model: Honda City&quot;&#10;            android:textSize=&quot;14sp&quot;&#10;            android:textColor=&quot;#6B8E6B&quot;&#10;            android:layout_marginBottom=&quot;8dp&quot;&#10;            tools:ignore=&quot;HardcodedText&quot; /&gt;&#10;&#10;        &lt;!-- Package Info --&gt;&#10;        &lt;LinearLayout&#10;            android:layout_width=&quot;match_parent&quot;&#10;            android:layout_height=&quot;wrap_content&quot;&#10;            android:orientation=&quot;horizontal&quot;&#10;            android:gravity=&quot;center_vertical&quot;&#10;            android:padding=&quot;8dp&quot;&#10;            android:background=&quot;@drawable/rounded_background&quot;&#10;            android:backgroundTint=&quot;#FFF3E0&quot;&#10;            android:layout_marginBottom=&quot;8dp&quot;&gt;&#10;&#10;            &lt;ImageView&#10;                android:layout_width=&quot;20dp&quot;&#10;                android:layout_height=&quot;20dp&quot;&#10;                android:src=&quot;@android:drawable/ic_menu_agenda&quot;&#10;                app:tint=&quot;#FF9800&quot;&#10;                android:layout_marginEnd=&quot;8dp&quot;&#10;                android:contentDescription=&quot;Package icon&quot; /&gt;&#10;&#10;            &lt;TextView&#10;                android:id=&quot;@+id/tvPackageName&quot;&#10;                android:layout_width=&quot;0dp&quot;&#10;                android:layout_height=&quot;wrap_content&quot;&#10;                android:layout_weight=&quot;1&quot;&#10;                android:text=&quot;Basic Maintenance Package&quot;&#10;                android:textSize=&quot;13sp&quot;&#10;                android:textColor=&quot;#E65100&quot;&#10;                android:textStyle=&quot;bold&quot;&#10;                tools:ignore=&quot;HardcodedText&quot; /&gt;&#10;        &lt;/LinearLayout&gt;&#10;&#10;        &lt;!-- Subscription Status --&gt;&#10;        &lt;LinearLayout&#10;            android:layout_width=&quot;match_parent&quot;&#10;            android:layout_height=&quot;wrap_content&quot;&#10;            android:orientation=&quot;horizontal&quot;&#10;            android:layout_marginBottom=&quot;8dp&quot;&gt;&#10;&#10;            &lt;TextView&#10;                android:id=&quot;@+id/tvSubscriptionStatus&quot;&#10;                android:layout_width=&quot;0dp&quot;&#10;                android:layout_height=&quot;wrap_content&quot;&#10;                android:layout_weight=&quot;1&quot;&#10;                android:text=&quot;Còn 25 ngày&quot;&#10;                android:textSize=&quot;13sp&quot;&#10;                android:textColor=&quot;#FF6B35&quot;&#10;                android:textStyle=&quot;bold&quot;&#10;                tools:ignore=&quot;HardcodedText&quot; /&gt;&#10;&#10;            &lt;TextView&#10;                android:id=&quot;@+id/tvKmInterval&quot;&#10;                android:layout_width=&quot;wrap_content&quot;&#10;                android:layout_height=&quot;wrap_content&quot;&#10;                android:text=&quot;5.000 km&quot;&#10;                android:textSize=&quot;12sp&quot;&#10;                android:textColor=&quot;#6B8E6B&quot;&#10;                tools:ignore=&quot;HardcodedText&quot; /&gt;&#10;        &lt;/LinearLayout&gt;&#10;&#10;        &lt;!-- Progress Bar --&gt;&#10;        &lt;ProgressBar&#10;            android:id=&quot;@+id/progressBar&quot;&#10;            android:layout_width=&quot;match_parent&quot;&#10;            android:layout_height=&quot;8dp&quot;&#10;            style=&quot;@style/Widget.AppCompat.ProgressBar.Horizontal&quot;&#10;            android:progress=&quot;65&quot;&#10;            android:progressTint=&quot;#4A7C59&quot;&#10;            android:progressBackgroundTint=&quot;#E8F5E8&quot; /&gt;&#10;&#10;        &lt;!-- Date Range --&gt;&#10;        &lt;TextView&#10;            android:id=&quot;@+id/tvDateRange&quot;&#10;            android:layout_width=&quot;wrap_content&quot;&#10;            android:layout_height=&quot;wrap_content&quot;&#10;            android:text=&quot;07/11/2025 - 07/12/2025&quot;&#10;            android:textSize=&quot;11sp&quot;&#10;            android:textColor=&quot;#9E9E9E&quot;&#10;            android:layout_marginTop=&quot;8dp&quot;&#10;            tools:ignore=&quot;HardcodedText&quot; /&gt;&#10;&#10;    &lt;/LinearLayout&gt;&#10;&lt;/androidx.cardview.widget.CardView&gt;&#10;&#10;" />
              <option name="updatedContent" value="&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;&#13;&#10;&lt;androidx.cardview.widget.CardView xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&#13;&#10;    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;&#13;&#10;    xmlns:tools=&quot;http://schemas.android.com/tools&quot;&#13;&#10;    android:layout_width=&quot;320dp&quot;&#13;&#10;    android:layout_height=&quot;wrap_content&quot;&#13;&#10;    android:layout_marginEnd=&quot;12dp&quot;&#13;&#10;    app:cardCornerRadius=&quot;16dp&quot;&#13;&#10;    app:cardElevation=&quot;6dp&quot;&#13;&#10;    app:cardBackgroundColor=&quot;#FFFFFF&quot;&gt;&#13;&#10;&#13;&#10;    &lt;LinearLayout&#13;&#10;        android:layout_width=&quot;match_parent&quot;&#13;&#10;        android:layout_height=&quot;wrap_content&quot;&#13;&#10;        android:orientation=&quot;vertical&quot;&#13;&#10;        android:padding=&quot;16dp&quot;&gt;&#13;&#10;&#13;&#10;        &lt;!-- Vehicle Info --&gt;&#13;&#10;        &lt;TextView&#13;&#10;            android:id=&quot;@+id/tvVehicleName&quot;&#13;&#10;            android:layout_width=&quot;wrap_content&quot;&#13;&#10;            android:layout_height=&quot;wrap_content&quot;&#13;&#10;            android:text=&quot;Honda City 2022&quot;&#13;&#10;            android:textSize=&quot;18sp&quot;&#13;&#10;            android:textColor=&quot;#2C5F2D&quot;&#13;&#10;            android:textStyle=&quot;bold&quot;&#13;&#10;            android:layout_marginBottom=&quot;4dp&quot;&#13;&#10;            tools:ignore=&quot;HardcodedText&quot; /&gt;&#13;&#10;&#13;&#10;        &lt;TextView&#13;&#10;            android:id=&quot;@+id/tvVehicleModel&quot;&#13;&#10;            android:layout_width=&quot;wrap_content&quot;&#13;&#10;            android:layout_height=&quot;wrap_content&quot;&#13;&#10;            android:text=&quot;Model: Honda City&quot;&#13;&#10;            android:textSize=&quot;14sp&quot;&#13;&#10;            android:textColor=&quot;#6B8E6B&quot;&#13;&#10;            android:layout_marginBottom=&quot;8dp&quot;&#13;&#10;            tools:ignore=&quot;HardcodedText&quot; /&gt;&#13;&#10;&#13;&#10;        &lt;!-- Package Info --&gt;&#13;&#10;        &lt;LinearLayout&#13;&#10;            android:layout_width=&quot;match_parent&quot;&#13;&#10;            android:layout_height=&quot;wrap_content&quot;&#13;&#10;            android:orientation=&quot;horizontal&quot;&#13;&#10;            android:gravity=&quot;center_vertical&quot;&#13;&#10;            android:padding=&quot;8dp&quot;&#13;&#10;            android:background=&quot;@drawable/rounded_background&quot;&#13;&#10;            android:backgroundTint=&quot;#FFF3E0&quot;&#13;&#10;            android:layout_marginBottom=&quot;8dp&quot;&gt;&#13;&#10;&#13;&#10;            &lt;ImageView&#13;&#10;                android:layout_width=&quot;20dp&quot;&#13;&#10;                android:layout_height=&quot;20dp&quot;&#13;&#10;                android:src=&quot;@android:drawable/ic_menu_agenda&quot;&#13;&#10;                app:tint=&quot;#FF9800&quot;&#13;&#10;                android:layout_marginEnd=&quot;8dp&quot;&#13;&#10;                android:contentDescription=&quot;Package icon&quot; /&gt;&#13;&#10;&#13;&#10;            &lt;TextView&#13;&#10;                android:id=&quot;@+id/tvPackageName&quot;&#13;&#10;                android:layout_width=&quot;0dp&quot;&#13;&#10;                android:layout_height=&quot;wrap_content&quot;&#13;&#10;                android:layout_weight=&quot;1&quot;&#13;&#10;                android:text=&quot;Basic Maintenance Package&quot;&#13;&#10;                android:textSize=&quot;13sp&quot;&#13;&#10;                android:textColor=&quot;#E65100&quot;&#13;&#10;                android:textStyle=&quot;bold&quot;&#13;&#10;                tools:ignore=&quot;HardcodedText&quot; /&gt;&#13;&#10;        &lt;/LinearLayout&gt;&#13;&#10;&#13;&#10;        &lt;!-- Subscription Status --&gt;&#13;&#10;        &lt;LinearLayout&#13;&#10;            android:layout_width=&quot;match_parent&quot;&#13;&#10;            android:layout_height=&quot;wrap_content&quot;&#13;&#10;            android:orientation=&quot;horizontal&quot;&#13;&#10;            android:layout_marginBottom=&quot;8dp&quot;&gt;&#13;&#10;&#13;&#10;            &lt;TextView&#13;&#10;                android:id=&quot;@+id/tvSubscriptionStatus&quot;&#13;&#10;                android:layout_width=&quot;0dp&quot;&#13;&#10;                android:layout_height=&quot;wrap_content&quot;&#13;&#10;                android:layout_weight=&quot;1&quot;&#13;&#10;                android:text=&quot;Còn 25 ngày&quot;&#13;&#10;                android:textSize=&quot;13sp&quot;&#13;&#10;                android:textColor=&quot;#FF6B35&quot;&#13;&#10;                android:textStyle=&quot;bold&quot;&#13;&#10;                tools:ignore=&quot;HardcodedText&quot; /&gt;&#13;&#10;&#13;&#10;            &lt;TextView&#13;&#10;                android:id=&quot;@+id/tvKmInterval&quot;&#13;&#10;                android:layout_width=&quot;wrap_content&quot;&#13;&#10;                android:layout_height=&quot;wrap_content&quot;&#13;&#10;                android:text=&quot;5.000 km&quot;&#13;&#10;                android:textSize=&quot;12sp&quot;&#13;&#10;                android:textColor=&quot;#6B8E6B&quot;&#13;&#10;                tools:ignore=&quot;HardcodedText&quot; /&gt;&#13;&#10;        &lt;/LinearLayout&gt;&#13;&#10;&#13;&#10;        &lt;!-- Progress Bar --&gt;&#13;&#10;        &lt;ProgressBar&#13;&#10;            android:id=&quot;@+id/progressBar&quot;&#13;&#10;            android:layout_width=&quot;match_parent&quot;&#13;&#10;            android:layout_height=&quot;8dp&quot;&#13;&#10;            style=&quot;@style/Widget.AppCompat.ProgressBar.Horizontal&quot;&#13;&#10;            android:progress=&quot;65&quot;&#13;&#10;            android:progressTint=&quot;#4A7C59&quot;&#13;&#10;            android:progressBackgroundTint=&quot;#E8F5E8&quot; /&gt;&#13;&#10;&#13;&#10;        &lt;!-- Date Range --&gt;&#13;&#10;        &lt;TextView&#13;&#10;            android:id=&quot;@+id/tvDateRange&quot;&#13;&#10;            android:layout_width=&quot;wrap_content&quot;&#13;&#10;            android:layout_height=&quot;wrap_content&quot;&#13;&#10;            android:text=&quot;07/11/2025 - 07/12/2025&quot;&#13;&#10;            android:textSize=&quot;11sp&quot;&#13;&#10;            android:textColor=&quot;#9E9E9E&quot;&#13;&#10;            android:layout_marginTop=&quot;8dp&quot;&#13;&#10;            tools:ignore=&quot;HardcodedText&quot; /&gt;&#13;&#10;&#13;&#10;    &lt;/LinearLayout&gt;&#13;&#10;&lt;/androidx.cardview.widget.CardView&gt;" />
            </PendingDiffInfo>
          </value>
        </entry>
      </map>
    </option>
  </component>
</project>